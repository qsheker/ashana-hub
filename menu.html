<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Menu - Asxana.hub</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&family=Poppins:wght@300;400&display=swap" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <link rel="stylesheet" href="styles/theme.css">
  <style>
    /* Search Styles */
    .search-container {
      margin: 20px 0;
      position: relative;
    }
    
    #searchInput {
      width: 100%;
      padding: 12px 20px;
      border: 2px solid #e0e0e0;
      border-radius: 25px;
      font-size: 16px;
      transition: all 0.3s ease;
    }
    
    #searchInput:focus {
      border-color: #ff6b6b;
      box-shadow: 0 0 10px rgba(255, 107, 107, 0.2);
      outline: none;
    }
    
    .autocomplete-suggestions {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      z-index: 1000;
      display: none;
      max-height: 200px;
      overflow-y: auto;
    }
    
    .suggestion-item {
      padding: 10px 20px;
      cursor: pointer;
      border-bottom: 1px solid #f5f5f5;
    }
    
    .suggestion-item:hover {
      background: #f8f9fa;
    }
    
    .suggestion-item:last-child {
      border-bottom: none;
    }
    
    /* Highlight Styles */
    .highlight {
      background-color: #fff3cd;
      padding: 2px 4px;
      border-radius: 3px;
      font-weight: 600;
    }
    
    /* Lazy Loading Styles */
    .food-item img {
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    
    .food-item img.loaded {
      opacity: 1;
    }
    
    .image-placeholder {
      width: 100%;
      height: 200px;
      background: #f8f9fa;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #6c757d;
    }
    
    /* Filter Results Info */
    .search-results-info {
      margin: 10px 0;
      color: #6c757d;
      font-style: italic;
    }
    
    .no-results {
      text-align: center;
      padding: 40px;
      color: #6c757d;
    }
  </style>
</head>
<body>
  <header>
    <div class="navbar-container">
      <div class="navbar-logo">AsxanaHub</div>
      <nav class="navbar-links">
        <a href="index.html">Home</a>
        <a href="menu.html" class="active">Menu</a>
        <a href="cart.html">Cart</a>
        <a href="auth.html">Login</a>
        <a href="discounts.html">Discounts</a>
        <a href="team.html">Team</a>
        <a href="profile.html">Profile</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section id="menu" class="card">
      <h2>Food - Menu</h2>
      
      <!-- Task 1 + Task 2: Search with Autocomplete -->
      <div class="search-container">
        <input type="text" id="searchInput" placeholder="Search for food items...">
        <div class="autocomplete-suggestions" id="autocompleteSuggestions"></div>
      </div>
      
      <div class="search-results-info" id="searchResultsInfo"></div>
      
      <div class="random-fact-container">
        <button id="randomFactBtn" class="random-fact-btn">
          Show random fact
        </button>
        <div id="randomFact" class="random-fact"></div>
      </div>
      
      <div class="food-list" id="foodList">
        <!-- Food items will be here -->
        <div class="food-item" data-categories="doner meat main">
          <div class="image-placeholder" data-src="https://images.unsplash.com/photo-1626645735466-533f6decc742?w=300&h=200&fit=crop">
            Loading Donerhub...
          </div>
          <h3>Donerhub <span class="price">- <i>3.99$</i></span>
          <button class="open-description">Open</button></h3>
          <p>Juicy doner with our special cherry sauce.</p>
          <div class="full-description">
            <h4>Full Description:</h4>
            <p>Our signature Donerhub features succulent meat cooked to perfection, 
            wrapped in warm flatbread with fresh vegetables and our exclusive cherry sauce 
            that adds a unique sweet and tangy flavor.</p>
            <ul>
              <li>Freshly cooked meat daily</li>
              <li>Homemade cherry sauce</li>
              <li>Crispy vegetables</li>
              <li>Warm flatbread</li>
            </ul>
          </div>
          <button class="order-btn">Order Now</button>
        </div>

        <div class="food-item" data-categories="drink shake dessert">
          <div class="image-placeholder" data-src="https://images.unsplash.com/photo-1577803645773-f96470509666?w=300&h=200&fit=crop">
            Loading Vibeshake...
          </div>
          <h3>Vibeshake <span class="price">- <i>2.65$</i></span>
          <button class="open-description">Open</button></h3>
          <p>Refreshing milkshake that matches your vibe.</p>
          <div class="full-description">
            <h4>Full Description:</h4>
            <p>A creamy, refreshing milkshake available in multiple flavors to match any mood. 
            Perfect for cooling down or as a sweet treat.</p>
            <ul>
              <li>Available in chocolate, vanilla, strawberry</li>
              <li>Made with real milk and ice cream</li>
              <li>Customizable sweetness levels</li>
            </ul>
          </div>
          <button class="order-btn">Order Now</button>
        </div>

        <div class="food-item" data-categories="burger meat main">
          <div class="image-placeholder" data-src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=300&h=200&fit=crop">
            Loading MVP-Burger...
          </div>
          <h3>MVP-Burger <span class="price">- <i>5.20$</i></span>
          <button class="open-description">Open</button></h3>
          <p>Your first bite to success — soft bun, fresh veggies, and premium beef.</p>
          <div class="full-description">
            <h4>Full Description:</h4>
            <p>The burger that makes you feel like a Most Valuable Player. 
            Premium beef patty with fresh lettuce, tomato, and our special MVP sauce.</p>
            <ul>
              <li>100% premium beef patty</li>
              <li>Fresh vegetables</li>
              <li>Soft brioche bun</li>
              <li>Special MVP sauce</li>
            </ul>
          </div>
          <button class="order-btn">Order Now</button>
        </div>

        <div class="food-item" data-categories="fries side snack">
          <div class="image-placeholder" data-src="https://images.unsplash.com/photo-1573080496219-bb080dd4f877?w=300&h=200&fit=crop">
            Loading Startup Fries...
          </div>
          <h3>Startup Fries <span class="price">- <i>2.99$</i></span>
          <button class="open-description">Open</button></h3>
          <p>Crispy golden fries — the sidekick to every big idea.</p>
          <div class="full-description">
            <h4>Full Description:</h4>
            <p>Golden crispy fries that are the perfect companion to any meal. 
            Seasoned with our special startup spice blend.</p>
            <ul>
              <li>Freshly cut potatoes</li>
              <li>Special startup seasoning</li>
              <li>Perfectly crispy texture</li>
            </ul>
          </div>
          <button class="order-btn">Order Now</button>
        </div>

        <div class="food-item" data-categories="dessert cake sweet">
          <div class="image-placeholder" data-src="https://images.unsplash.com/photo-1565958011703-44f9829ba187?w=300&h=200&fit=crop">
            Loading Cherry Cheesecake...
          </div>
          <h3>Cherry Cheesecake <span class="price">- <i>4.50$</i></span>
          <button class="open-description">Open</button></h3>
          <p>Creamy cheesecake with a cherry topping, perfect for sweet lovers.</p>
          <div class="full-description">
            <h4>Full Description:</h4>
            <p>Indulge in our creamy cheesecake with a sweet cherry topping. 
            The perfect dessert to satisfy your sweet tooth.</p>
            <ul>
              <li>Creamy cheese filling</li>
              <li>Sweet cherry topping</li>
              <li>Buttery graham cracker crust</li>
            </ul>
          </div>
          <button class="order-btn">Order Now</button>
        </div>

        <div class="food-item" data-categories="drink coffee beverage">
          <div class="image-placeholder" data-src="https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=300&h=200&fit=crop">
            Loading CodeCoffee...
          </div>
          <h3>CodeCoffee <span class="price">- <i>1.99$</i></span>
          <button class="open-description">Open</button></h3>
          <p>Strong coffee to fuel your coding sessions — hot and energizing.</p>
          <div class="full-description">
            <h4>Full Description:</h4>
            <p>The perfect brew for developers and coders. Strong, aromatic coffee 
            that keeps you focused and energized during long coding sessions.</p>
            <ul>
              <li>Premium Arabica beans</li>
              <li>Brewed to perfection</li>
              <li>Available hot or iced</li>
            </ul>
          </div>
          <button class="order-btn">Order Now</button>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>© 2025 Asxana.hub. All rights reserved.</p>
  </footer>

  <script src="scripts/menu.js"></script>
  <script>
    $(document).ready(function() {
      console.log("jQuery is ready!");

      // Available search suggestions
      const searchSuggestions = [
        "doner", "burger", "fries", "shake", "coffee", "cheesecake",
        "meat", "drink", "dessert", "snack", "main course", "beverage",
        "Donerhub", "Vibeshake", "MVP-Burger", "Startup Fries", "Cherry Cheesecake", "CodeCoffee"
      ];

      // Task 1 + Task 2: Real-time Search with Autocomplete
      $('#searchInput').on('input', function() {
        const searchTerm = $(this).val().toLowerCase();
        const $suggestions = $('#autocompleteSuggestions');
        
        // Clear previous suggestions
        $suggestions.empty().hide();
        
        if (searchTerm.length > 0) {
          // Filter suggestions
          const filteredSuggestions = searchSuggestions.filter(suggestion =>
            suggestion.toLowerCase().includes(searchTerm)
          );
          
          // Show suggestions
          if (filteredSuggestions.length > 0) {
            filteredSuggestions.forEach(suggestion => {
              $suggestions.append(
                $('<div class="suggestion-item"></div>')
                  .text(suggestion)
                  .click(function() {
                    $('#searchInput').val(suggestion);
                    $suggestions.hide();
                    filterFoodItems(suggestion);
                  })
              );
            });
            $suggestions.show();
          }
        }
        
        filterFoodItems(searchTerm);
      });

      // Hide suggestions when clicking outside
      $(document).click(function(e) {
        if (!$(e.target).closest('.search-container').length) {
          $('#autocompleteSuggestions').hide();
        }
      });

      // Task 1: Real-time filtering function
      function filterFoodItems(searchTerm) {
        const $foodItems = $('.food-item');
        let visibleCount = 0;
        
        $foodItems.each(function() {
          const $item = $(this);
          const itemText = $item.text().toLowerCase();
          const itemCategories = $item.data('categories').toLowerCase();
          
          // Check if item matches search term
          const matches = searchTerm.length === 0 || 
                         itemText.includes(searchTerm) || 
                         itemCategories.includes(searchTerm);
          
          if (matches) {
            $item.show();
            visibleCount++;
            
            // Task 3: Highlight matching text
            if (searchTerm.length > 1) {
              highlightText($item, searchTerm);
            } else {
              removeHighlights($item);
            }
          } else {
            $item.hide();
            removeHighlights($item);
          }
        });
        
        // Update results info
        const $resultsInfo = $('#searchResultsInfo');
        if (searchTerm.length > 0) {
          $resultsInfo.text(`Found ${visibleCount} item(s) matching "${searchTerm}"`);
        } else {
          $resultsInfo.text('');
        }
        
        // Show no results message
        const $noResults = $('<div class="no-results">No items found matching your search.</div>');
        if (visibleCount === 0 && searchTerm.length > 0) {
          if ($('#foodList .no-results').length === 0) {
            $('#foodList').append($noResults);
          }
        } else {
          $('.no-results').remove();
        }
      }

      // Task 3: Search Highlighting
      function highlightText($element, searchTerm) {
        removeHighlights($element);
        
        const regex = new RegExp(`(${escapeRegex(searchTerm)})`, 'gi');
        
        $element.contents().each(function() {
          if (this.nodeType === 3) { // Text node
            const text = $(this).text();
            const highlighted = text.replace(regex, '<span class="highlight">$1</span>');
            if (highlighted !== text) {
              $(this).replaceWith(highlighted);
            }
          } else if (this.nodeType === 1) { // Element node
            highlightText($(this), searchTerm);
          }
        });
      }

      function removeHighlights($element) {
        $element.find('.highlight').each(function() {
          $(this).replaceWith($(this).text());
        });
      }

      function escapeRegex(string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
      }

      // Task 9: Lazy Loading Images
      function lazyLoadImages() {
        $('.image-placeholder').each(function() {
          const $placeholder = $(this);
          const imageUrl = $placeholder.data('src');
          
          if (isElementInViewport($placeholder[0]) && imageUrl) {
            const img = new Image();
            img.onload = function() {
              $placeholder.replaceWith(
                $('<img>')
                  .attr('src', imageUrl)
                  .attr('alt', $placeholder.text())
                  .addClass('loaded')
                  .css({
                    'width': '100%',
                    'height': '200px',
                    'object-fit': 'cover',
                    'border-radius': '8px'
                  })
              );
            };
            img.src = imageUrl;
          }
        });
      }

      function isElementInViewport(el) {
        const rect = el.getBoundingClientRect();
        return (
          rect.top >= 0 &&
          rect.left >= 0 &&
          rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
          rect.right <= (window.innerWidth || document.documentElement.clientWidth)
        );
      }

      // Initial lazy load
      lazyLoadImages();

      // Lazy load on scroll
      $(window).on('scroll', lazyLoadImages);

      // Clear search when page loads
      $('#searchInput').val('').focus();
    });
  </script>
</body>
</html>